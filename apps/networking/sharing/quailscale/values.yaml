---
# yaml-language-server: $schema=https://raw.githubusercontent.com/bjw-s-labs/helm-charts/main/charts/library/common/values.schema.json
controllers:
  quailscale:
    pod:
      securityContext:
        fsGroup: 979
        fsGroupChangePolicy: "OnRootMismatch"

    containers:
      alpine:
        image:
          repository: ghcr.io/home-operations/it-tools
          tag: 2024.10@sha256:7f26ae8d7a4a58b8d70b685cba5cbaa54d7df876d9f8bae702207f45b06d9b7c
          pullPolicy: IfNotPresent
        securityContext:
          runAsNonRoot: true
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true

service:
  tailscale:
    enabled: true
    controller: quailscale
    annotations:
      external-dns.alpha.kubernetes.io/hostname: qbittorrent.localdomain
    type: LoadBalancer
    loadBalancerClass: tailscale
    ports:
      tailscale:
        port: 8022

persistence:
  books:
    enabled: true
    type: nfs
    server: new-peepums
    path: '/volume1/media/books/Calibre Library'
    advancedMounts:
      quailscale:
        tailscale:
          - path: /share/books
            readOnly: true
  anime:
    enabled: true
    type: nfs
    server: new-peepums
    path: '/volume1/media/plex/anime'
    advancedMounts:
      quailscale:
        tailscale:
          - path: /share/anime
            readOnly: true
  movies:
    enabled: true
    type: nfs
    server: new-peepums
    path: '/volume1/media/plex/movies'
    advancedMounts:
      quailscale:
        tailscale:
          - path: /share/movies
            readOnly: true
  tv:
    enabled: true
    type: nfs
    server: new-peepums
    path: '/volume1/media/plex/tv'
    advancedMounts:
      quailscale:
        tailscale:
          - path: /share/tv
            readOnly: true
