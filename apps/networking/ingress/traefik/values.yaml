additionalArguments:
# - "--certificatesresolvers.duckdns.acme.storage=/ssl-certs/acme-duckdns.json"
- "--certificatesresolvers.duckdns.acme.storage=/tmp/acme.json"
- "--certificatesresolvers.duckdns.acme.dnsChallenge.provider=duckdns"

env:
- name: DUCKDNS_TOKEN
  valueFrom:
    secretKeyRef:
      name: duckdns-credentials
      key: token

ingressRoute:
  dashboard:
    enabled: true
    insecure: true

api:
  dashboard: true
  insecure: true

# persistence:
#   enabled: true
#   name: ssl-certs
#   path: /ssl-certs
#   storageClass: ceph-block
#   size: 128Mi

ports:
  web:
    redirectTo: websecure
  websecure:
    tls:
      enabled: true
      certResolver: duckdns

ingressClass:
  enabled: true
  isDefaultClass: true

service:
  type: LoadBalancer
  spec:
    loadBalancerIP: "192.168.8.80"

# https://github.com/traefik/traefik-helm-chart/issues/396
# deployment:
#   initContainers:
#   - name: volume-permissions
#     image: busybox:1.31.1
#     command: ["sh", "-c", "chmod -Rv 600 /ssl-certs/*"]
#     volumeMounts:
#     - name: ssl-certs
#       mountPath: /ssl-certs
